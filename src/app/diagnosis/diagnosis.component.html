
  <section class="content-header">
    <h1 *ngIf="diagnosisPhase == 0 || diagnosisPhase == 1 || diagnosisPhase == 3 || diagnosisPhase == 5 ">
    {{'diagnosisTitle'|translate}}
  </h1>
    <h1 *ngIf="diagnosisPhase == 2">
      Source{{'phaseResult'|translate}}
    </h1>
    <h1 *ngIf="diagnosisPhase == 4">
      Make{{'phaseResult'|translate}}
    </h1>
    <h1 *ngIf="diagnosisPhase == 6">
      Delivery{{'phaseResult'|translate}}
    </h1>
    <h1 *ngIf="diagnosisPhase == 7">
      {{'finalResult'|translate}}
    </h1>
  </section>

  <div class="box col-md-12" style="min-height: 850px" *ngIf="diagnosisPhase == 0">
      <div class="col-md-12" style="height: 20px">
      </div>
      <div class="col-md-5 test-box" *ngFor="let item of testList">
        <div class="col-md-8">
          <div class="info-box bg-aqua" style="min-height: 100px;width: 100%;">
            <span class="info-box-icon" style="height: 100px; width: 100px; line-height: 105px"><i class="ion ion-ios-paper-outline"></i></span>
            <div class="info-box-content">
              <span class="info-box-number">{{item.test.name}}</span>
              <span class="info-box-text">{{item.test.questions.length}} {{'items'|translate}}</span>
              <span class="info-box-text">{{item.test.comment}}</span>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <a class="btn btn-app" style="height: 100px; min-width: 90px" (click)="startDiagnosis(item.test)">
            <i class="fa fa-edit" style="font-size: 30px;line-height: 42px;"></i> {{'diagnosis'|translate}}
          </a>
        </div>
      </div>
  </div>

  <div id= "phaseOneDiv" class="box col-md-12" style="min-height: 850px;overflow: auto;" *ngIf="diagnosisPhase == 1">
    <div *ngIf="!activeCodeCorrect">
      <div style="margin: 0 auto">
        <h3 style="margin-top: 50px; margin-bottom: 50px; text-align: center">{{'activeCodeAlert'|translate}}</h3>
      </div>
      <div style="margin-bottom: 50px">
        <input class="form-control" [(ngModel)]="activeCode" style="height: 30px; width: 30% ;margin: 0 auto">
      </div>
      <button class="btn btn-block btn-primary btn-lg" style="width: 20%; margin: 0 auto" (click)="verifyCode()">{{'verifyButton'|translate}}</button>
      <button class="btn btn-block btn-warning btn-lg" style="width: 20%; margin: 0 auto; margin-top: 20px;" (click)="backToChoose()">{{'backToChoose'|translate}}</button>
    </div>
    <div *ngIf="activeCodeCorrect">
      <div class="nav-wrapper">
        <div class="top-nav" *ngIf="scrollHeight == 0">
          <span class="info-box-icon" style="height: 50px; width: 50px; line-height: 38px"><i class="ion ion-ios-pricetag-outline" style="font-size: 40px !important;"></i></span>
          <div class="info-box-content">
            <span class="diagnosis-info-box">Source: {{sourceAnswerList.length}}/{{sourceList.length}} {{'items'|translate}}</span>
            <span *ngIf="finishAlertShowing" class="diagnosis-info-alert">&nbsp;&nbsp;&nbsp;{{'finishAlert'|translate}}</span>
          </div>
        </div>
        <div class="nav-wrapper-shadow" *ngIf="scrollHeight >40">
          <span class="info-box-icon" style="height: 50px; width: 50px; line-height: 38px"><i class="ion ion-ios-pricetag-outline" style="font-size: 40px !important;"></i></span>
          <div class="info-box-content">
            <span class="diagnosis-info-box">Source: {{sourceAnswerList.length}}/{{sourceList.length}} {{'items'|translate}}</span>
            <span *ngIf="finishAlertShowing" class="diagnosis-info-alert">&nbsp;&nbsp;&nbsp;{{'finishAlert'|translate}}</span>
          </div>
        </div>
      </div>

      <ng-container *ngFor="let item of sourceList let i = index" [attr.data-index]="i">
        <app-questionbox [questionFromFather] = item  [questionNumberFromFather] = i+1  [answerFromFather] = sourceAnswerList  (answerFromChild)="getFromChild($event)"></app-questionbox>
      </ng-container>
      <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: right; margin-bottom: 15px" (click)="getPhaseOneResult()" [disabled]="unsubmitable">{{'nextStep'|translate}}</button>
    </div>
  </div>

  <div class="box col-md-12" *ngIf="diagnosisPhase == 2">
    <h2>{{'phaseOneFinish'|translate}}</h2>
    <h2>{{'score'|translate}}: {{phaseOneScore}}</h2>
    <div class="col-md-12" echarts [options]="options1" style="min-width: 400px; height: 400px;"></div>
    <div class="col-md-12">
      <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: left; margin-bottom: 15px" (click)="gotoNextPhase()">{{'continue'|translate}}</button>
    </div>
  </div>

  <div class="box col-md-12" *ngIf="diagnosisPhase == 3">
    <div class="nav-wrapper">
      <div class="top-nav" *ngIf="scrollHeight == 0">
        <span class="info-box-icon" style="height: 50px; width: 50px; line-height: 38px"><i class="ion ion-ios-pricetag-outline" style="font-size: 40px !important;"></i></span>
        <div class="info-box-content">
          <span class="diagnosis-info-box">Make: {{makeAnswerList.length}}/{{makeList.length}} {{'items'|translate}}</span>
          <span *ngIf="finishAlertShowing" class="diagnosis-info-alert">&nbsp;&nbsp;&nbsp;{{'finishAlert'|translate}}</span>
        </div>
      </div>
      <div class="nav-wrapper-shadow" *ngIf="scrollHeight >40">
        <span class="info-box-icon" style="height: 50px; width: 50px; line-height: 38px"><i class="ion ion-ios-pricetag-outline" style="font-size: 40px !important;"></i></span>
        <div class="info-box-content">
          <span class="diagnosis-info-box">Make: {{makeAnswerList.length}}/{{makeList.length}} {{'items'|translate}}</span>
          <span *ngIf="finishAlertShowing" class="diagnosis-info-alert">&nbsp;&nbsp;&nbsp;{{'finishAlert'|translate}}</span>
        </div>
      </div>
    </div>
    <ng-container *ngFor="let item of makeList; let i = index" [attr.data-index]="i">
      <app-questionbox [questionFromFather] = item [questionNumberFromFather] = i+1 [answerFromFather] = makeAnswerList  (answerFromChild)="getFromChild($event)"></app-questionbox>
    </ng-container>
    <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: right; margin-bottom: 15px" (click)="getPhaseTwoResult()" [disabled]="unsubmitable">{{'nextStep'|translate}}</button>
  </div>

  <div class="box col-md-12" *ngIf="diagnosisPhase == 4">
    <h2>{{'phaseTwoFinish'|translate}}</h2>
    <h2>{{'score'|translate}}: {{phaseTwoScore}}</h2>
    <div class="col-md-12" echarts [options]="options2" style="min-width: 400px; height: 400px;"></div>
    <div class="col-md-12">
      <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: left; margin-bottom: 15px" (click)="gotoNextPhase()">{{'continue'|translate}}</button>
    </div>
  </div>

  <div class="box col-md-12" *ngIf="diagnosisPhase == 5">
    <div class="nav-wrapper">
      <div class="top-nav" *ngIf="scrollHeight == 0">
        <span class="info-box-icon" style="height: 50px; width: 50px; line-height: 38px"><i class="ion ion-ios-pricetag-outline" style="font-size: 40px !important;"></i></span>
        <div class="info-box-content">
          <span class="diagnosis-info-box">Delivery: {{deliveryAnswerList.length}}/{{deliveryList.length}} {{'items'|translate}}</span>
          <span *ngIf="finishAlertShowing" class="diagnosis-info-alert">&nbsp;&nbsp;&nbsp;{{'finishAlert'|translate}}</span>
        </div>
      </div>
      <div class="nav-wrapper-shadow" *ngIf="scrollHeight >40">
        <span class="info-box-icon" style="height: 50px; width: 50px; line-height: 38px"><i class="ion ion-ios-pricetag-outline" style="font-size: 40px !important;"></i></span>
        <div class="info-box-content">
          <span class="diagnosis-info-box">Delivery: {{deliveryAnswerList.length}}/{{deliveryList.length}} {{'items'|translate}}</span>
          <span *ngIf="finishAlertShowing" class="diagnosis-info-alert">&nbsp;&nbsp;&nbsp;{{'finishAlert'|translate}}</span>
        </div>
      </div>
    </div>
    <ng-container *ngFor="let item of deliveryList let i = index" [attr.data-index]="i">
      <app-questionbox [questionFromFather] = item  [questionNumberFromFather] = i+1  [answerFromFather] = deliveryAnswerList  (answerFromChild)="getFromChild($event)"></app-questionbox>
    </ng-container>
    <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: right; margin-bottom: 15px" (click)="getPhaseThreeResult()" [disabled]="unsubmitable">{{'submit'|translate}}</button>
  </div>

  <div class="box col-md-12" *ngIf="diagnosisPhase == 6">
    <h2>{{'phaseThreeFinish'|translate}}</h2>
    <h2>{{'score'|translate}}: {{phaseThreeScore}}</h2>
    <div class="col-md-12" echarts [options]="options3" style="min-width: 400px; height: 400px;"></div>
    <div class="col-md-12">
      <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: left; margin-bottom: 15px" (click)="sentAnswer()">{{'continue'|translate}}</button>
    </div>
  </div>

  <div class="box col-md-12" *ngIf="diagnosisPhase == 7">
    <h1>{{'allPhaseFinish'|translate}}</h1>
    <h1>{{finalLevel}}</h1>
    <button class="btn btn-block btn-primary btn-lg" style="width: 20%; float: left; margin-bottom: 15px" (click)="gotoResultDetail()">{{'reportTitle'|translate}}</button>
  </div>
